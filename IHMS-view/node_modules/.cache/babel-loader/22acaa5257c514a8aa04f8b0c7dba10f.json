{"remainingRequest":"D:\\code\\project\\健康管理系统\\健康管理系统\\前端\\personal-heath-view\\node_modules\\babel-loader\\lib\\index.js!D:\\code\\project\\健康管理系统\\健康管理系统\\前端\\personal-heath-view\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\code\\project\\健康管理系统\\健康管理系统\\前端\\personal-heath-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\project\\健康管理系统\\健康管理系统\\前端\\personal-heath-view\\src\\views\\admin\\Main.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\project\\健康管理系统\\健康管理系统\\前端\\personal-heath-view\\src\\views\\admin\\Main.vue","mtime":1731908842000},{"path":"D:\\code\\project\\健康管理系统\\健康管理系统\\前端\\personal-heath-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746543375897},{"path":"D:\\code\\project\\健康管理系统\\健康管理系统\\前端\\personal-heath-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1746543376599},{"path":"D:\\code\\project\\健康管理系统\\健康管理系统\\前端\\personal-heath-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746543375897},{"path":"D:\\code\\project\\健康管理系统\\健康管理系统\\前端\\personal-heath-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1746543376907}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMaW5lQ2hhcnQgZnJvbSAiQC9jb21wb25lbnRzL0xpbmVDaGFydCI7CmltcG9ydCBQaWVDaGFydCBmcm9tICJAL2NvbXBvbmVudHMvUGllQ2hhcnQiOwppbXBvcnQgeyB0aW1lQWdvIH0gZnJvbSAiQC91dGlscy9kYXRhIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIExpbmVDaGFydCwKICAgIFBpZUNoYXJ0CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlclZhbHVlczogW10sCiAgICAgIHVzZXJEYXRlczogW10sCiAgICAgIG1vZGVsRGF0ZXM6IFtdLAogICAgICBtb2RlbFZhbHVlczogW10sCiAgICAgIHBpZVZhbHVlczogW10sCiAgICAgIHBpZVR5cGVzOiBbXSwKICAgICAgbWVzc2FnZUxpc3Q6IFtdCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIC8vIOaVsOaNrui+g+Wwke+8jOm7mOiupOafpTM2NeWkqQogICAgdGhpcy51c2VyRGF0ZXNTZWxlY3RlZCgzNjUpOwogICAgLy8g5pWw5o2u6L6D5bCR77yM6buY6K6k5p+lMzY15aSpCiAgICB0aGlzLm1vZGVsRGF0ZXNTZWxlY3RlZCgzNjUpOwogICAgdGhpcy5sb2FkUGllQ2hhcnRzKCk7CiAgICB0aGlzLmxvYWRNZXNzYWdlcygpOwogIH0sCiAgbWV0aG9kczogewogICAgdGltZShjcmVhdGVUaW1lKSB7CiAgICAgIHJldHVybiB0aW1lQWdvKGNyZWF0ZVRpbWUpOwogICAgfSwKICAgIC8vIOWKoOi9vei1hOiurwogICAgbG9hZE1lc3NhZ2VzKCkgewogICAgICBjb25zdCBtZXNzYWdlUXVlcnlEdG8gPSB7CiAgICAgICAgY3VycmVudDogMSwKICAgICAgICBzaXplOiA0CiAgICAgIH07CiAgICAgIHRoaXMuJGF4aW9zLnBvc3QoYC9tZXNzYWdlL3F1ZXJ5YCwgbWVzc2FnZVF1ZXJ5RHRvKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBjb25zdCB7CiAgICAgICAgICBkYXRhCiAgICAgICAgfSA9IHJlc3BvbnNlOwogICAgICAgIGlmIChkYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy5tZXNzYWdlTGlzdCA9IGRhdGEuZGF0YTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGxvYWRQaWVDaGFydHMoKSB7CiAgICAgIHRoaXMuJGF4aW9zLmdldChgL3ZpZXdzL3N0YXRpY0NvbnRyb2xzYCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgZGF0YQogICAgICAgIH0gPSByZXNwb25zZTsKICAgICAgICBpZiAoZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMucGllVmFsdWVzID0gZGF0YS5kYXRhLm1hcChlbnRpdHkgPT4gZW50aXR5LmNvdW50KTsKICAgICAgICAgIHRoaXMucGllVHlwZXMgPSBkYXRhLmRhdGEubWFwKGVudGl0eSA9PiBlbnRpdHkubmFtZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBtb2RlbERhdGVzU2VsZWN0ZWQodGltZSkgewogICAgICB0aGlzLiRheGlvcy5nZXQoYC91c2VyLWhlYWx0aC9kYXlzUXVlcnkvJHt0aW1lfWApLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbnN0IHsKICAgICAgICAgIGRhdGEKICAgICAgICB9ID0gcmVzcG9uc2U7CiAgICAgICAgaWYgKGRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLm1vZGVsVmFsdWVzID0gZGF0YS5kYXRhLm1hcChlbnRpdHkgPT4gZW50aXR5LmNvdW50KTsKICAgICAgICAgIHRoaXMubW9kZWxEYXRlcyA9IGRhdGEuZGF0YS5tYXAoZW50aXR5ID0+IGVudGl0eS5uYW1lKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHVzZXJEYXRlc1NlbGVjdGVkKHRpbWUpIHsKICAgICAgdGhpcy4kYXhpb3MuZ2V0KGAvdXNlci9kYXlzUXVlcnkvJHt0aW1lfWApLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbnN0IHsKICAgICAgICAgIGRhdGEKICAgICAgICB9ID0gcmVzcG9uc2U7CiAgICAgICAgaWYgKGRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLnVzZXJWYWx1ZXMgPSBkYXRhLmRhdGEubWFwKGVudGl0eSA9PiBlbnRpdHkuY291bnQpOwogICAgICAgICAgdGhpcy51c2VyRGF0ZXMgPSBkYXRhLmRhdGEubWFwKGVudGl0eSA9PiBlbnRpdHkubmFtZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["LineChart","PieChart","timeAgo","components","data","userValues","userDates","modelDates","modelValues","pieValues","pieTypes","messageList","created","userDatesSelected","modelDatesSelected","loadPieCharts","loadMessages","methods","time","createTime","messageQueryDto","current","size","$axios","post","then","response","code","get","map","entity","count","name"],"sources":["src/views/admin/Main.vue"],"sourcesContent":["<template>\r\n    <div style=\"box-sizing: border-box;overflow-y: hidden;overflow-x: hidden;padding: 10px;\">\r\n        <el-row>\r\n            <el-col :span=\"8\">\r\n                <div style=\"padding: 15px 5px;box-sizing: border-box;\">\r\n                    <PieChart fontColor=\"rgb(51,51,51)\" bag=\"rgb(248,248,248)\" :values=\"pieValues\" :types=\"pieTypes\" />\r\n                </div>\r\n                <div style=\"padding: 10px 5px;box-sizing: border-box;\">\r\n                    <div v-for=\"(message,index) in messageList\" :key=\"message\">\r\n                        <div style=\"font-size: 16px;font-weight: 800;\">{{ message.receiverName }}</div>\r\n                        <div style=\"padding: 8px 0;font-size: 14px;color: #6f6d6d;\">{{ message.content }}</div>\r\n                        <div style=\"padding: 5px 0;font-size: 14px;color: #6f6d6d;\">{{ message.createTime }}</div>\r\n                    </div>\r\n                </div>\r\n            </el-col>\r\n            <el-col :span=\"16\">\r\n                <div style=\"padding: 15px;box-sizing: border-box;\">\r\n                    <LineChart height=\"290px\" tag=\"存量用户\" @on-selected=\"userDatesSelected\" :values=\"userValues\"\r\n                        :date=\"userDates\" />\r\n                </div>\r\n                <div style=\"padding: 15px;box-sizing: border-box;\">\r\n                    <LineChart height=\"290px\" tag=\"健康指标\" @on-selected=\"modelDatesSelected\" :values=\"modelValues\"\r\n                        :date=\"modelDates\" />\r\n                </div>\r\n            </el-col>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n<script>\r\nimport LineChart from \"@/components/LineChart\"\r\nimport PieChart from \"@/components/PieChart\"\r\nimport { timeAgo } from \"@/utils/data\"\r\nexport default {\r\n    components: { LineChart, PieChart },\r\n    data() {\r\n        return {\r\n            userValues: [],\r\n            userDates: [],\r\n            modelDates: [],\r\n            modelValues: [],\r\n            pieValues: [],\r\n            pieTypes: [],\r\n            messageList: []\r\n        }\r\n    },\r\n    created() {\r\n        // 数据较少，默认查365天\r\n        this.userDatesSelected(365);\r\n        // 数据较少，默认查365天\r\n        this.modelDatesSelected(365);\r\n        this.loadPieCharts();\r\n        this.loadMessages();\r\n    },\r\n    methods: {\r\n        time(createTime) {\r\n            return timeAgo(createTime);\r\n        },\r\n        // 加载资讯\r\n        loadMessages () {\r\n            const messageQueryDto = {\r\n                current: 1,\r\n                size: 4\r\n            }\r\n            this.$axios.post(`/message/query`, messageQueryDto).then(response => {\r\n                const { data } = response;\r\n                if (data.code === 200) {\r\n                    this.messageList = data.data;\r\n                }\r\n            })\r\n        },\r\n        loadPieCharts() {\r\n            this.$axios.get(`/views/staticControls`).then(response => {\r\n                const { data } = response;\r\n                if (data.code === 200) {\r\n                    this.pieValues = data.data.map(entity => entity.count);\r\n                    this.pieTypes = data.data.map(entity => entity.name);\r\n                }\r\n            })\r\n        },\r\n        modelDatesSelected(time) {\r\n            this.$axios.get(`/user-health/daysQuery/${time}`).then(response => {\r\n                const { data } = response;\r\n                if (data.code === 200) {\r\n                    this.modelValues = data.data.map(entity => entity.count);\r\n                    this.modelDates = data.data.map(entity => entity.name);\r\n                }\r\n            })\r\n        },\r\n        userDatesSelected(time) {\r\n            this.$axios.get(`/user/daysQuery/${time}`).then(response => {\r\n                const { data } = response;\r\n                if (data.code === 200) {\r\n                    this.userValues = data.data.map(entity => entity.count);\r\n                    this.userDates = data.data.map(entity => entity.name);\r\n                }\r\n            })\r\n        },\r\n    },\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.new-item {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n\r\n    .item {\r\n        padding: 5px;\r\n        box-sizing: border-box;\r\n\r\n        img {\r\n            width: 168px;\r\n            height: 104px;\r\n            border-radius: 5px;\r\n        }\r\n\r\n    }\r\n\r\n    .item-buttom {\r\n        padding: 5px;\r\n        box-sizing: border-box;\r\n\r\n        .title {\r\n            font-size: 16px;\r\n            font-weight: 800;\r\n        }\r\n\r\n    }\r\n}\r\n</style>"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,OAAAA,SAAA;AACA,OAAAC,QAAA;AACA,SAAAC,OAAA;AACA;EACAC,UAAA;IAAAH,SAAA;IAAAC;EAAA;EACAG,KAAA;IACA;MACAC,UAAA;MACAC,SAAA;MACAC,UAAA;MACAC,WAAA;MACAC,SAAA;MACAC,QAAA;MACAC,WAAA;IACA;EACA;EACAC,QAAA;IACA;IACA,KAAAC,iBAAA;IACA;IACA,KAAAC,kBAAA;IACA,KAAAC,aAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACAC,KAAAC,UAAA;MACA,OAAAjB,OAAA,CAAAiB,UAAA;IACA;IACA;IACAH,aAAA;MACA,MAAAI,eAAA;QACAC,OAAA;QACAC,IAAA;MACA;MACA,KAAAC,MAAA,CAAAC,IAAA,mBAAAJ,eAAA,EAAAK,IAAA,CAAAC,QAAA;QACA;UAAAtB;QAAA,IAAAsB,QAAA;QACA,IAAAtB,IAAA,CAAAuB,IAAA;UACA,KAAAhB,WAAA,GAAAP,IAAA,CAAAA,IAAA;QACA;MACA;IACA;IACAW,cAAA;MACA,KAAAQ,MAAA,CAAAK,GAAA,0BAAAH,IAAA,CAAAC,QAAA;QACA;UAAAtB;QAAA,IAAAsB,QAAA;QACA,IAAAtB,IAAA,CAAAuB,IAAA;UACA,KAAAlB,SAAA,GAAAL,IAAA,CAAAA,IAAA,CAAAyB,GAAA,CAAAC,MAAA,IAAAA,MAAA,CAAAC,KAAA;UACA,KAAArB,QAAA,GAAAN,IAAA,CAAAA,IAAA,CAAAyB,GAAA,CAAAC,MAAA,IAAAA,MAAA,CAAAE,IAAA;QACA;MACA;IACA;IACAlB,mBAAAI,IAAA;MACA,KAAAK,MAAA,CAAAK,GAAA,2BAAAV,IAAA,IAAAO,IAAA,CAAAC,QAAA;QACA;UAAAtB;QAAA,IAAAsB,QAAA;QACA,IAAAtB,IAAA,CAAAuB,IAAA;UACA,KAAAnB,WAAA,GAAAJ,IAAA,CAAAA,IAAA,CAAAyB,GAAA,CAAAC,MAAA,IAAAA,MAAA,CAAAC,KAAA;UACA,KAAAxB,UAAA,GAAAH,IAAA,CAAAA,IAAA,CAAAyB,GAAA,CAAAC,MAAA,IAAAA,MAAA,CAAAE,IAAA;QACA;MACA;IACA;IACAnB,kBAAAK,IAAA;MACA,KAAAK,MAAA,CAAAK,GAAA,oBAAAV,IAAA,IAAAO,IAAA,CAAAC,QAAA;QACA;UAAAtB;QAAA,IAAAsB,QAAA;QACA,IAAAtB,IAAA,CAAAuB,IAAA;UACA,KAAAtB,UAAA,GAAAD,IAAA,CAAAA,IAAA,CAAAyB,GAAA,CAAAC,MAAA,IAAAA,MAAA,CAAAC,KAAA;UACA,KAAAzB,SAAA,GAAAF,IAAA,CAAAA,IAAA,CAAAyB,GAAA,CAAAC,MAAA,IAAAA,MAAA,CAAAE,IAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]}]}